import { getCourseById } from "@/api/courseApi";
import type {
  Course,
  CourseStep,
  LessonType,
  VideoProvider,
} from "@/types/course";
import { useQuery } from "@tanstack/react-query";
import { useMemo, useState } from "react";
import { useParams } from "react-router";

export function LessonPage() {
  const { id, stepId } = useParams();

  const { isLoading, data: course } = useQuery<Course>({
    queryKey: [`course-${id}`],
    queryFn: async () => {
      const response = await getCourseById(id as string);
      return response.course;
    },
  });

  const currentStep = course?.steps.find((step) => step.id === stepId);

  if (isLoading) {
    return <div className="bg-surface-1 h-screen" />;
  }

  switch (currentStep?.stepType) {
    case "video":
      return (
        <div>
          <div className="text-lg font-bold">{currentStep?.title}</div>
        </div>
      );
    case "text":
      return (
        <div>
          <div className="text-lg font-bold">{currentStep?.title}</div>
        </div>
      );
    case "quiz":
      return (
        <div>
          <div className="text-lg font-bold">{currentStep?.title}</div>
        </div>
      );
    default:
      return <div>Урок не найден</div>;
  }
}
